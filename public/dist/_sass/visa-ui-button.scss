@import 'visa-ui-utils';
@import 'visa-ui-colors';
@import 'visa-ui-theme';
@import 'visa-ui-core';



/***
  visa-ui Buttons
  BEM Naming Convention http://getbem.com/naming/

  @author sacuna
*/

/* === Text Button - Primary ========== */
// Default
$color-button-text--primary-text: theme(button--default-text);
$color-button-text--primary-background: theme(action-primary);
$color-button-text--primary-border: none;
// Hover
$color-button-text--primary-text--hover: theme(button--default-text--hover);
$color-button-text--primary-background--hover: theme(action-primary--hover);
$color-button-text--primary-border--hover: none;
// Disabled
$color-button-text--primary-text--disabled: theme(button--default-text--disabled);
$color-button-text--primary-background--disabled: theme(action-primary--disabled);
$color-button-text--primary-border--disabled: none;
// Selected
$color-button-text--primary-text--selected: theme(button--default-text--selected);
$color-button-text--primary-background--selected: theme(action-primary--selected);
$color-button-text--primary-border--selected: none;

/* === Text Button - Secondary ========== */
// Default
$color-button-text--secondary-text: theme(button--secondary-text);
$color-button-text--secondary-background: theme(action-secondary);
$color-button-text--secondary-border: theme(button--secondary-border);
// Hover
$color-button-text--secondary-text--hover: theme(button--secondary-text--hover);
$color-button-text--secondary-background--hover: theme(action-secondary--hover);
$color-button-text--secondary-border--hover: theme(button--secondary-border);
// Disabled
$color-button-text--secondary-text--disabled: theme(button--secondary-text--disabled);
$color-button-text--secondary-background--disabled: theme(action-secondary--disabled);
$color-button-text--secondary-border--disabled: none;
// Selected
$color-button-text--secondary-text--selected: theme(button--secondary-text--selected);
$color-button-text--secondary-background--selected: theme(action-secondary--selected);
$color-button-text--secondary-border--selected: theme(button--secondary-border);

/* === Text Button - Tertiary ========== */
// Default
$color-button-text--tertiary-text: theme(button--tertiary-text);
$color-button-text--tertiary-background: none;
$color-button-text--tertiary-border: none;
// Hover
$color-button-text--tertiary-text--hover: theme(button--teritary-text--hover);
$color-button-text--tertiary-background--hover: none;
$color-button-text--tertiary-border--hover: none;
// Disabled
$color-button-text--tertiary-text--disabled: theme(button--tertiary-text--disabled);
$color-button-text--tertiary-background--disabled: none;
$color-button-text--tertiary-border--disabled: none;
// Selected
$color-button-text--tertiary-text--selected: theme(button--tertiary-text--selected);
$color-button-text--tertiary-background--selected: none;
$color-button-text--tertiary-border--selected: none;



/* === Icon `Button `- Primary ========== */
// Default
$color-button-icon--primary-text: theme(button--default-text);
$color-button-icon--primary-background: theme(action-primary);
// Hover
$color-button-icon--primary-text--hover: theme(button--default-text--hover);
$color-button-icon--primary-background--hover: theme(action-primary--hover);
// Disabled
$color-button-icon--primary-text--disabled: theme(button--default-text--disabled);
$color-button-icon--primary-background--disabled: theme(action-primary--disabled);
// Selected
$color-button-icon--primary-text--selected: theme(button--default-text--selected);
$color-button-icon--primary-background--selected: theme(action-primary--selected);

/* === Icon Button - Secondary ========== */
$color-button-icon--secondary-text: theme(button-icon-text);
$color-button-icon--secondary-text--hover: theme(button--secondary-text);
$color-button-icon--secondary-text--disabled: theme(button--secondary-text--disabled);
$color-button-icon--secondary-text--selected: theme(button-icon-text);
$color-button-icon--secondary-background: theme(action-secondary);

/* === Icon Button - Tertiary ========== */
$color-button-icon--tertiary-text: theme(button-icon-text);
$color-button-icon--tertiary-text--hover: theme(button--secondary-text);
$color-button-icon--tertiary-text--disabled: theme(button--secondary-text--disabled);
$color-button-icon--tertiary-text--selected: theme(button-icon--tertiary-text--selected);
$color-button-icon--tertiary-background: transparent;



/* === Link Button - Primary ========== */
$color-button-link--primary-text: theme(action-primary);
$color-button-link--primary-text--hover: theme(action-primary--hover);
$color-button-link--primary-text--disabled: theme(action-primary--disabled);
$color-button-link--primary-text--selected: theme(action-primary--selected);

@mixin default-button {
  @include state-focus;

  border-radius: theme(button--radius);
  cursor: pointer !important;
  font-family: theme(font);
  font-size: px2em(12px); //1em; // 14px
  outline: none;
  transition: background .25s ease;

  // &:focus:not(:active) { // sass-lint:disable-line force-pseudo-nesting
  //   text-decoration: underline;
  // }

  .visa-ui-btn--label {
    max-width: 100%;
    overflow-wrap: break-word;
    word-break: normal;
    word-wrap: normal;
  }

  &[disabled],
  &.visa-ui-state--disabled {
    cursor: default !important;

    .visa-ui-btn--label,
    .visa-ui-btn--action {
      cursor: default !important;
    }
  }

  [class^='visa-ui-icon'] {
    @include svg-icon(px2em(20px), $color-button-icon--primary-text);
  }
}

@mixin default-button-text {
  @include display-flex;
  @include default-button;
  align-items: center;
  background: $color-button-text--primary-background;
  border: 0px;
  color: $color-button-text--primary-text;
  cursor: pointer;
  font-weight: theme(font-weight--bold);
  justify-content: center;
  letter-spacing: px2em(.75px);
  margin: px2em(0px) px2em(5px) px2em(2px) px2em(5px);
  min-height: 40px;
  min-width: 140px; // 140px + 20px padding left & right [20+100+20]
  padding: px2em(0px) !important;
  text-decoration: none;
  text-transform: uppercase;

  _:-ms-fullscreen, // sass-lint:disable-line force-pseudo-nesting
  .ie11up,
  & {
    display: inline;
  }

  &:hover,
  &:focus,
  &:active {
    background: $color-button-text--primary-background--hover;
    color: $color-button-text--primary-text--hover;
  }

  &[disabled],
  &.visa-ui-state--disabled {
    background: $color-button-text--primary-background--disabled;
    border: px2em(1px) solid $color-button-text--primary-border--disabled;
    color: $color-button-text--primary-text--disabled;
    cursor: not-allowed !important;
  }

  &.visa-ui-state--active {
    border: px2em(2px) solid $color-button-text--primary-border--selected;
  }
}

@mixin default-button-icon {
  @include display-flex;
  @include default-button;
  align-items: center;
  background: $color-button-icon--primary-background;
  border: px2em(0px);
  border-radius: px2em(40px);
  color: $color-button-icon--primary-text;
  height: px2em(40px);
  justify-content: center;
  // max-width: px2em(40px);
  min-width: px2em(40px);
  // width: px2em(40px);

  _:-ms-fullscreen, // sass-lint:disable-line force-pseudo-nesting
  .ie11up,
  & {
    display: inline;
  }

  [class^='visa-ui-icon'] {
    @include svg-icon(px2em(20px), $color-button-icon--primary-text);
  }

  &:hover,
  &:active,
  &:focus {
    background: $color-button-icon--primary-background--hover;
    color: $color-button-icon--primary-text--hover;
    outline: none !important;

    [class^='visa-ui-icon'] {
      @include svg-icon(px2em(20px), $color-button-icon--primary-text--hover);
    }
  }

  &:focus {
    outline: none !important;
    position: relative;
    text-decoration: none !important;

    .visa-ui-btn--label {
      text-decoration: none !important;
    }

    &::before {
      border: px2em(2px) dashed theme(focus-outline-color);
      border-radius: px2em(38px);
      content: '';
      height: px2em(38px);
      max-width: px2em(38px);
      min-width: px2em(38px);
      position: absolute;
      width: px2em(38px);

      @media screen and (min-color-index: 0) and (-webkit-min-device-pixel-ratio: 0) {
        & {
          left: px2em(-1px);
          top: px2em(-1px);
        }
      }

      @media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
        & {
          height: px2em(36px) !important;
          left: px2em(1px) !important;
          min-width: px2em(35px) !important;
          top: px2em(0px) !important;
          width: px2em(35px) !important;
        }
      }
    }
  }

  &[disabled],
  &.visa-ui-state--disabled {
    background: $color-button-icon--primary-background--disabled;
    color: $color-button-icon--primary-text--disabled;

    [class^='visa-ui-icon'] {
      @include svg-icon(px2em(20px), $color-button-icon--primary-text--disabled);
    }
  }

  &.visa-ui-state--active {
    background: $color-button-icon--primary-background--selected;
    color: $color-button-icon--primary-text--selected;

    [class^='visa-ui-icon'] {
      @include svg-icon(px2em(20px), $color-button-icon--primary-text--selected);
    }
  }

  .visa-ui-btn--label {
    padding: px2em(0px) !important;
  }
}

@mixin default-button-link {
  @include default-button;
  background-color: transparent !important;
  border: px2em(0px);
  color: $color-button-link--primary-text;
  display: inline-block;
  font-weight: theme(font-weight--bold);
  letter-spacing: px2em(.75px);
  padding: px2em(0px);
  text-decoration: none;
  text-transform: uppercase;

  [class^='visa-ui-icon'] {
    @include svg-icon(1rem, $color-button-link--primary-text);
  }

  &:link,
  &:visited {
    color: $color-button-link--primary-text;

    [class^='visa-ui-icon'] {
      @include svg-icon(1rem, $color-button-link--primary-text);
    }
  }

  &:hover,
  &:active,
  &:focus {
    color: $color-button-link--primary-text--hover;
    text-decoration: none;

    [class^='visa-ui-icon'] {
      @include svg-icon(1rem, $color-button-link--primary-text--hover);
    }
  }

  &:focus:not(:active) { // sass-lint:disable-line force-pseudo-nesting
    text-decoration: underline !important;
  }

  &[disabled] {
    color: $color-button-link--primary-text--disabled;

    [class^='visa-ui-icon'] {
      @include svg-icon(1rem, $color-button-link--primary-text--disabled);
    }
  }
}

@-moz-document url-prefix() {
  .visa-ui-btn-split {
    .visa-ui-btn--label {
      display: block !important;
      float: left;
      text-align: center;
    }
  }
}

@-moz-document url-prefix() {
  .visa-ui-btn-split {
    .visa-ui-btn--action {
      display: block !important;
      float: right;
      // max-width: px2em(20px);
      text-align: center;
    }
  }
}

// visa-ui Buttons
.visa-ui-btn {
  cursor: pointer !important;

  // Button Container
  @at-root #{&}-container {
    margin-bottom: px2em(30px);
  }

  // Button Group
  @at-root #{&}-group {
    @include display-flex;
    align-items: center;

    .visa-ui-btn-link {
      margin: px2em(0px) px2em(10px);

      &:first-child {
        margin-left: px2em(0px);
      }

      &:last-child {
        margin-right: px2em(0px);
      }
    }

    @at-root #{&}--reverse {
      @include xbrowser-property(flex-direction, row-reverse);
    }

    @at-root #{&}--right {
      justify-content: flex-end;
    }
  }

  @at-root #{&}--label { // span is used because Safari doesn't render button elem as display: flex
    @include display-flex;
    align-items: center;
    cursor: pointer;
    flex: 0 0 auto;
    justify-content: center;
    margin: auto;
    padding: px2em(0px) px2em(20px);
    text-align: center;

    @-moz-document url-prefix() {
      & {
        padding: px2em(0px) px2em(11px);
      }
    }

    @media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
      & {
        padding: px2em(0px) px2em(15px);
      }
    }


  }

  @at-root #{&}--action {
    @include display-flex;
    align-items: center;
    border-left: px2em(1px) solid theme(action-primary--hover);
    cursor: pointer;
    flex: 0 0 auto;
    justify-content: center;
    padding: px2em(12px) px2em(6px);
  }

  // Text Buttons
  @at-root #{&}-text {
    @include default-button-text;

    @at-root #{&}--primary {
      @include default-button-text;
    }

    @at-root #{&}--secondary {
      @include default-button-text;
      background: $color-button-text--secondary-background;
      border: 1px solid $color-button-text--secondary-border;
      color: $color-button-text--secondary-text;
      font-weight: theme(font-weight--regular);
      text-decoration: none;
      text-transform: capitalize;

      &:hover,
      &:focus,
      &:active {
        background: $color-button-text--secondary-background--hover;
        color: $color-button-text--secondary-text--hover;
      }

      &[disabled],
      &.visa-ui-state--disabled {
        background: $color-button-text--secondary-background--disabled;
        border: 1px solid $color-button-text--secondary-border--disabled;
        color: $color-button-text--secondary-text--disabled;
      }

      &.visa-ui-state--active {
        border: 2px solid $color-button-text--secondary-border--selected;
      }

      &.visa-ui-btn--label {
        margin: 0px !important;
      }
    }

    @at-root #{&}--tertiary {
      @include default-button-text;
      @include state-focus;

      background: $color-button-text--tertiary-background;
      border: px2em(1px) solid $color-button-text--tertiary-background;
      color: $color-button-text--tertiary-text;
      font-weight: theme(font-weight--bold);
      text-decoration: none;
      text-transform: uppercase;

      &:hover,
      &:focus,
      &:active {
        background: $color-button-text--tertiary-background--hover;
        color: $color-button-text--tertiary-text--hover;
      }

      &[disabled],
      &.visa-ui-state--disabled {
        background: $color-button-text--tertiary-background--disabled;
        color: $color-button-text--tertiary-text--disabled;
      }
    }
  }

  // Icon Buttons
  @at-root #{&}-icon {
    @include default-button-icon;

    @at-root #{&}--primary {
      @include default-button-icon;
    }

    @at-root #{&}--secondary {
      @include default-button-icon;
      background: $color-button-icon--secondary-background;
      border-radius: px2em(32px);
      color: $color-button-icon--secondary-text;
      height: px2em(32px);
      min-width: px2em(32px);

      // i {
      //   font-size: px2em(20px) !important;
      // }
      [class^='visa-ui-icon'] {
        @include svg-icon(px2em(18px), $color-button-icon--secondary-text);
      }

      &:hover,
      &:active,
      &:focus {
        background: $color-button-icon--secondary-background;
        color: $color-button-icon--secondary-text--hover;

        [class^='visa-ui-icon'] {
          @include svg-icon(px2em(18px), $color-button-icon--secondary-text--hover);
        }
      }

      &:focus { // sass-lint:disable-line force-pseudo-nesting
        &::before {
          border-radius: px2em(32px);
          height: px2em(32px);
          max-width: px2em(32px);
          min-width: px2em(32px);
          width: px2em(32px);

          @media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
            & {
              height: px2em(29px) !important;
              left: px2em(1px) !important;
              min-width: px2em(29px) !important;
              top: px2em(0px) !important;
              width: px2em(29px) !important;
            }
          }
        }
      }

      &[disabled],
      &.visa-ui-state--disabled {
        background: $color-button-icon--secondary-background;
        color: $color-button-icon--secondary-text--disabled;

        [class^='visa-ui-icon'] {
          @include svg-icon(px2em(18px), $color-button-icon--secondary-text--disabled);
        }
        // cursor: default !important;

        // .visa-ui-btn--label,
        // .visa-ui-btn--action {
        //     cursor: default !important;
        // }
      }

      &.visa-ui-state--active {
        background: $color-button-icon--secondary-background;
        color: $color-button-icon--secondary-text--selected;
      }
    }

    @at-root #{&}--tertiary {
      @include default-button-icon;
      background: $color-button-icon--tertiary-background;
      border-radius: px2em(18px);
      color: $color-button-icon--tertiary-text;
      height: px2em(18px);
      min-width: px2em(18px);

      // i {
      //   font-size: px2em(18px) !important;
      // }
      [class^='visa-ui-icon'] {
        @include svg-icon(px2em(14px), $color-button-icon--tertiary-text);
      }

      &:hover,
      &:active,
      &:focus {
        background: $color-button-icon--tertiary-background;
        color: $color-button-icon--tertiary-text--hover;

        [class^='visa-ui-icon'] {
          @include svg-icon(px2em(14px), $color-button-icon--tertiary-text--hover);
        }
      }

      &:focus { // sass-lint:disable-line force-pseudo-nesting
        &::before {
          border-radius: px2em(24px);
          height: px2em(24px);
          left: 1px;
          max-width: px2em(24px);
          min-width: px2em(24px);
          top: -3px;
          width: px2em(24px);

          @media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
            & {
              height: px2em(16px) !important;
              left: px2em(5px) !important;
              min-width: px2em(16px) !important;
              top: px2em(0px) !important;
              width: px2em(16px) !important;
            }
          }
        }
      }

      &[disabled],
      &.visa-ui-state--disabled {
        background: $color-button-icon--tertiary-background;
        color: $color-button-icon--tertiary-text--disabled;

        [class^='visa-ui-icon'] {
          @include svg-icon(px2em(14px), $color-button-icon--tertiary-text--disabled);
        }
      }

      &.visa-ui-state--active {
        background: $color-button-icon--tertiary-background;
        color: $color-button-icon--tertiary-text--selected;

        [class^='visa-ui-icon'] {
          @include svg-icon(px2em(14px), $color-button-icon--tertiary-text--selected);
        }
      }
    }
  }

  // Link Buttons
  // LoVeHAte Definition Order (:link, :visited, :hover, :active)
  @at-root #{&}-link {
    @include default-button-link;

    @at-root #{&}--primary {
      @include default-button-link;
    }

    @at-root #{&}--secondary {
      @include default-button-link;
      font-size: 1em; // 14px
      font-weight: theme(font-weight--regular);
      text-decoration: none;
      text-transform: capitalize;

      &:link,
      &:visited {
        color: $color-button-link--primary-text;
      }

      &:hover,
      &:active,
      &:focus {
        color: $color-button-link--primary-text--hover;
        text-decoration: underline;
      }

      &[disabled] {
        color: $color-button-link--primary-text--disabled;
        text-decoration: none;
      }
    }

    @at-root #{&}--tertiary {
      @include default-button-link;
      font-size: px2em(11px);
      font-weight: theme(font-weight--bold);
      text-decoration: none;
      text-transform: capitalize;

      &:link,
      &:visited {
        color: $color-button-link--primary-text;
      }

      &:hover,
      &:active,
      &:focus {
        color: $color-button-link--primary-text--hover;
        text-decoration: underline;
      }

      &[disabled] {
        color: $color-button-link--primary-text--disabled;
        text-decoration: none;
      }
    }
  }


  // Split Buttons
  @at-root #{&}-split {
    @include default-button-text;

    _:-ms-fullscreen, // sass-lint:disable-line force-pseudo-nesting
    .ie11up,
    & {
      .visa-ui-btn--label {
        display: inline !important;
        min-width: px2em(110px);
      }

      .visa-ui-btn--action {
        display: inline !important;

        svg {
          &[class^='visa-ui-icon'] {
            margin: 3px -3px -3px 3px;
          }
        }
      }
    }

    [class^='visa-ui-icon'] {
      @include svg-icon(px2em(16px), $color-button-icon--primary-text);
    }
  }
} // END .visa-ui__button
