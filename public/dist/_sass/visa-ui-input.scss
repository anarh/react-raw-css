@import 'visa-ui-utils';
@import 'visa-ui-colors';
@import 'visa-ui-theme';
@import 'visa-ui-core';



/***
  visa-ui Input
  BEM Naming Convention http://getbem.com/naming/

  @author sacuna
*/

$visa-ui-input-width: 250px;
$visa-ui-message-margin: 30px;

$color-input-underline: theme(action-primary--inactive);
$color-input-underline--active: theme(action-primary);
$color-input-underline--readonly: theme(focus-outline-color);
$color-input-underline--disabled: theme(action-input--disabled);
$color-input-background: theme(button--default-text);
$color-input-background--active: theme(background);
$color-input-color: theme(font-color-info);
$color-input-positive: theme(notification-positive);
$color-input-negative: theme(notification-negative);


@mixin expanded-label {
  font-size: .85em;
  font-weight: theme(font-weight--bold);
  left: 0px;
  top: -25px;
}

@mixin default-input {
  border-bottom: 2px solid $color-input-underline;
  display: inline-block;
  margin-top: 25px;
  max-width: 100%;
  min-width: $visa-ui-input-width;
  position: relative;
  transition: .25s ease;

  &:hover {
    border-bottom-color: $color-input-underline--active;
    cursor: text;
  }

  &.visa-ui-state--focus,
  &.visa-ui-state--filled {
    border-bottom-color: $color-input-underline--active;
    outline: none;

    .visa-ui-input-label,
    .visa-ui-select-label {
      &:nth-of-type(1) {
        @include expanded-label;
      }
    }

    input,
    textarea {
      outline: none !important;

      @-moz-document url-prefix() {
        & {
          box-shadow: 0 0 0;
        }
      }
    }
  }

  &.visa-ui-state--focus {
    background-color: $color-input-background--active;

    .visa-ui-input-hint {
      display: block;
    }
  }

  &.visa-ui-state--filled {
    .visa-ui-input-hint {
      display: none;
    }
  }

  &.visa-ui-state--content,
  &.visa-ui-state--readonly {
    .visa-ui-input-label,
    .visa-ui-select-label {
      @include expanded-label;
    }
  }

  &.visa-ui-state--content {
    background-color: $color-input-background !important;
  }

  &.visa-ui-state--readonly {
    border-bottom: 2px dashed $color-input-underline--readonly;

    input,
    textarea {
      color: $color-input-color;
    }

    &.visa-ui-state--focus {
      background-color: $color-input-background !important;

      input,
      textarea {
        outline: none !important;

        @-moz-document url-prefix() {
          & {
            box-shadow: 0 0 0;
          }
        }
      }
    }
  }

  &.visa-ui-state--success {
    &,
    &.visa-ui-state--focus {
      .visa-ui-input-option:not(.visa-ui-type--actionable), // sass-lint:disable-line force-pseudo-nesting force-element-nesting
      .visa-ui-select-option:not(.visa-ui-type--actionable) { // sass-lint:disable-line force-pseudo-nesting force-element-nesting
        [class^='visa-ui-icon'] {
          @include svg-icon(1rem, theme(notification-positive));

          use {
            &[href~='checkmark'] {
              @include svg-icon(1rem, theme(notification-positive));
            }
          }
        }
      }
    }
  }

  &.visa-ui-state--error {
    &,
    &.visa-ui-state--focus {
      border-bottom-color: $color-input-negative;
      margin-bottom: $visa-ui-message-margin;

      .visa-ui-input-label {
        color: theme(notification-negative);
      }

      .error-cross {
        color: $color-input-negative;
        font-weight: 700;
      }

      .visa-ui-input-message {
        color: theme(notification-negative);

        [class^='visa-ui-icon'] {
          @include svg-icon(1rem, theme(notification-negative));
          position: relative;
          top: 2px;
        }
      }
    }
  }

  &.visa-ui-state--disabled {
    border-bottom: 2px dashed $color-input-underline--disabled;
    cursor: not-allowed !important;

    &:hover {
      border-bottom: 2px dashed $color-input-underline--disabled;
    }

    .visa-ui-input-label,
    .visa-ui-select-label,
    .visa-ui-input-input,
    .visa-ui-select-value,
    input {
      color: $color-input-underline--disabled;
      cursor: not-allowed !important;
    }

    .visa-ui-type--actionable {
      cursor: inherit;
    }

    [class^='visa-ui-icon'] {
      @include svg-icon(1rem, $color-input-underline--disabled);
    }
  }

  .visa-ui-input-label,
  .visa-ui-select-label {
    color: $color-input-color;
    cursor: text;
    left: 0px;
    margin-left: 3px;
    margin-top: 4px;
    position: absolute;
    top: -3px;
    transition: .25s ease;
  }

  &.visa-ui-state--message {
    margin-bottom: $visa-ui-message-margin;
  }

  &-message,
  &-count {
    color: $color-input-color;
    font-size: px2em(12px);
    margin-top: 5px;
    position: absolute;
  }

  &-message {
    left: 3px;
  }

  &-count {
    right: 0px;
  }

  &-bar {
    @include display-flex;
    direction: row;
  }

  &-hint {
    color: $color-input-color;
    display: none;
    left: 3px;
    position: absolute;
    top: 3px;
  }

  &-input {
    flex-grow: 7;
  }

  &-option,
  &-search {
    display: inline-block;
    // margin: 0px 5px;

    &.visa-ui-type--actionable {
      cursor: pointer;
    }

    &.visa-ui-type--required {
      .visa-ui-dot--required {
        margin: 0px 5px 0px 3px;
        position: relative;
        top: 12px; //left: 7px;
      }
    }

    &.visa-ui-state--hidden {
      display: none;
    }

    i {
      position: relative;
      top: 7px;
    }

    [class^='visa-ui-icon'] {
      @include svg-icon(1rem, theme(action-primary));
      left: -2px;
      margin: 0px 4px 0px 0px;
      position: relative;
      top: 4px;
    }
  }
}

.visa-ui-input {
  @include default-input;

  input,
  textarea {
    background-color: transparent;
    border: 0px;
    font-size: 1em;
    padding: 6px 3px 4px 3px;
    width: 98%;

    &:focus {
      outline: none;
    }
  }

  textarea {
    height: px2em(19px);
    min-height: px2em(19px) !important;
    overflow: hidden;
    resize: vertical;
  }

  &.visa-ui-state--manual-resize {
    textarea {
      overflow: scroll;
    }
  }

  &-linesize {
    display: none;
    font-size: 1em;
    left: -999px;
    line-height: normal;
    min-height: px2em(19px) !important;
    position: fixed;
    top: -999px;
    visibility: hidden;
    white-space: pre-wrap;
    word-wrap: break-word;
    z-index: -1;
  }
}
